import{h as b,_ as P,c as h,u as f,a as n,o,b as e,n as v,d as m,t as r,e as u,f as k,r as w,F as g,g as _,i as $}from"./index-3gVIpqoc.js";import{a as y}from"./cartService-DGmhw8xa.js";const p=(l=0,t=12)=>b.get("/v1/api/items",{page:l,size:t}).catch(i=>i.response),x={class:"card shadow-sm"},C=["aria-label"],S={class:"card-body"},I={class:"card-text"},N={class:"me-2"},L={key:0,class:"discount badge bg-danger"},B={class:"d-flex justify-content-between align-items-center"},V={class:"d-flex gap-2 align-items-center"},j={key:0,class:"price text-muted"},z={__name:"Card",props:{item:{id:Number,imgPath:String,name:String,price:Number,discountPer:Number}},setup(l){const t=l,i=h(()=>(t.item.price-t.item.price*t.item.discountPer/100).toLocaleString()+"원"),c=f(),s=async()=>{if(!k().accessToken){window.confirm("로그인이 필요한 서비스입니다. 로그인 페이지로 이동하시겠습니까?")&&await c.push("/login");return}(await y(t.item.id)).status===200&&window.confirm("장바구니에 담았습니다. 장바구니로 이동하시겠습니까?")&&await c.push("/cart")};return(a,d)=>(o(),n("div",x,[e("span",{class:"img",style:v({backgroundImage:`url(${t.item.imgPath})`}),"aria-label":`상품 사진(${t.item.name})`},null,12,C),e("div",S,[e("p",I,[e("span",N,r(t.item.name),1),t.item.discountPer>0?(o(),n("span",L,r(t.item.discountPer)+"%",1)):m("",!0)]),e("div",B,[e("button",{class:"btn btn-primary btn-sm",onClick:d[0]||(d[0]=J=>s())},"장바구니 담기"),e("div",V,[t.item.discountPer>0?(o(),n("small",j,r(t.item.price.toLocaleString())+"원",1)):m("",!0),e("small",{class:u(t.item.discountPer>0?"real text-danger":"price")},r(t.item.discountPer>0?i.value:t.item.price.toLocaleString()+"원"),3)])])])]))}},D=P(z,[["__scopeId","data-v-8063a1cc"]]),F={class:"home"},R={class:"album py-5 bg-light"},q={class:"container"},A={class:"row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3"},E={class:"col"},H={"aria-label":"Page navigation"},T={class:"pagination justify-content-center"},G=["onClick"],O={__name:"Home",setup(l){const t=w({items:[]});(async function(){const s=await p(0,12);s.status===200&&(t.items=s.data.content,t.totalPages=s.data.totalPages,t.currentPage=s.data.number)})();async function i(c){const s=await p(c,12);s.status===200&&(t.items=s.data.content,t.totalPages=s.data.totalPages,t.currentPage=s.data.number)}return(c,s)=>(o(),n("div",F,[e("div",R,[e("div",q,[e("div",A,[(o(!0),n(g,null,_(t.items,a=>(o(),n("div",E,[$(D,{item:a},null,8,["item"])]))),256))]),e("nav",H,[e("ul",T,[e("li",{class:u(["page-item",{disabled:t.currentPage===0}])},[e("button",{class:"page-link",onClick:s[0]||(s[0]=a=>i(t.currentPage-1))},"이전")],2),(o(!0),n(g,null,_(t.totalPages,a=>(o(),n("li",{class:u(["page-item",{active:t.currentPage===a-1}]),key:a},[e("button",{class:"page-link",onClick:d=>i(a-1)},r(a),9,G)],2))),128)),e("li",{class:u(["page-item",{disabled:t.currentPage===t.totalPages-1}])},[e("button",{class:"page-link",onClick:s[1]||(s[1]=a=>i(t.currentPage+1))},"다음")],2)])])])])]))}};export{O as default};
